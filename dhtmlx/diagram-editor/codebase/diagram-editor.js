/*
@license

dhtmlxDiagram v.2.0.0 Trial
This software is covered by DHTMLX Evaluation License. Contact sales@dhtmlx.com to get Commercial or Enterprise license. Usage without proper license is prohibited.

(c) Dinamenta, UAB.
*/!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/codebase/",n(n.s=17)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(19);e.el=i.defineElement,e.sv=i.defineSvgElement,e.view=i.defineView,e.create=i.createView,e.inject=i.injectView,e.resizer=function(t){return e.el("iframe",{_hooks:{didInsert:function(e){var n=function(){var n=e.el.offsetHeight,i=e.el.offsetWidth;t(i,n)};e.el.contentWindow.onresize=n,n()}},style:"position:absolute;left:0;top:-100%;width:100%;height:100%;margin:1px 0 0;border:none;opacity:0;visibility:hidden;pointer-events:none;"})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.events={},this.context=t||this}return t.prototype.on=function(t,e,n){t=t.toLowerCase(),this.events[t]=this.events[t]||[],this.events[t].push({callback:e,context:n||this.context})},t.prototype.detach=function(t,e){var n=this.events[t];if(e)for(var i=n.length-1;i>=0;i--)n[i].context===e&&n.splice(i,1);else this.events[t]=[]},t.prototype.fire=function(t,e){return void 0===e&&(e=[]),t=t.toLowerCase(),!this.events[t]||this.events[t].map(function(t){return t.callback.apply(t.context,e)}).indexOf(!1)<0},t}();e.EventSystem=i,e.EventsMixin=function(t){var e=new i(t=t||{});t.detachEvent=e.detach.bind(e),t.attachEvent=e.on.bind(e),t.callEvent=e.fire.bind(e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(new Date).valueOf();e.uid=function(){return"u"+i++},e.extend=function t(e,n){if(n)for(var i in n){var r=n[i],o=e[i];"object"==typeof o?t(o,r):e[i]=r}return e},e.copy=function(t){var e={};for(var n in t)e[n]=t[n];return e},e.naturalSort=function(t){return t.sort(function(t,e){return"string"==typeof t?t.localeCompare(e):t-e})}},function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r=n(16),o=n(2),s=n(0),a=function(){function t(t,e){var n=this;this._config=i({},t),this._evs=e,this._uid=o.uid(),this._handlers={change:function(t){return n._changed(t)}}}return t.prototype.setValue=function(t,e){var n=this._config.value;t!==n&&(this._config.value=t,this._config.invalid=!r.validate(t,this._config.validate),e||this._evs.callEvent("onChange",[this._config.id,t,n]))},t.prototype.getValue=function(){return this._config.value},t.prototype.clear=function(){this.setValue("",!0)},t.prototype.toVDOM=function(){return s.el(".dhx_text_item",{_key:this._uid},[s.el(".dhx_value",[s.el("input",{_ref:this._uid,type:"text",value:this._config.value,class:this._config.invaild?"dhx_invalid":"",onchange:this._handlers.change,oninput:this._handlers.change})])])},t.prototype._changed=function(t){this.setValue(t.target.value)},t}();e.Text=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toNode=function(t){return"string"==typeof t&&(t=document.getElementById(t)||document.querySelector(t)),t||document.body},e.eventHandler=function(t,e){var n=Object.keys(e);return function(i){for(var r=t(i),o=i.target;o;){var s=o.classList;if(s&&s.length)for(var a=0;a<n.length;a++)if(s.contains(n[a]))return e[n[a]](i,r);o=o.parentNode}return!0}},e.locate=function(t,e){void 0===e&&(e="dhx_id");for(var n=t.target;n&&n.getAttribute;){var i=n.getAttribute(e);if(i)return i;n=n.parentNode}},e.getBox=function(t){var e=t.getBoundingClientRect(),n=document.body,i=window.pageYOffset||n.scrollTop,r=window.pageXOffset||n.scrollLeft;return{top:e.top+i,left:e.left+r,right:n.offsetWidth-e.right,bottom:n.offsetHeight-e.bottom,width:e.right-e.left,height:e.bottom-e.top}};var i=-1;e.getScrollbarWidth=function(){if(i>-1)return i;var t=document.createElement("div");return document.body.appendChild(t),t.style.cssText="position: absolute;left: -99999px;overflow:scroll;width: 100px;height: 100px;",i=t.offsetWidth-t.clientWidth,document.body.removeChild(t),i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),r=n(4),o=function(){function t(t,e){this._uid=i.uid(),this.config=e||{}}return t.prototype.mount=function(t,e){this._view=e,t&&e.mount&&(this._container=r.toNode(t),e.mount(this._container))},t.prototype.getRootView=function(){return this._view},t.prototype.paint=function(){this._view&&(this._view.node||this._container||!this._view.mount)&&(this._doNotRepaint=!1,this._view.redraw())},t}();e.View=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.config=this.setDefaults(t),this.id=t.id}return t.prototype.isConnector=function(){return!1},t.prototype.getCenter=function(){var t=this.config;return{x:Math.abs(t.width/2),y:Math.abs(t.height/2)}},t.prototype.getBox=function(){var t=this.config,e=t.x+(t.dx||0),n=e+t.width,i=t.y+(t.dy||0);return{left:e,right:n,top:i,bottom:i+t.height}},t.prototype.getMetaInfo=function(){return[{id:"text",label:"Text",type:"text"}]},t.prototype.move=function(t,e){this.update({x:t,y:e})},t.prototype.resize=function(t,e){this.update({width:t,height:e})},t.prototype.rotate=function(t){this.update({angle:t})},t.prototype.update=function(t){for(var e in t)this.config[e]=t[e]},t.prototype.toSVG=function(){return""},t.prototype.getPoint=function(t,e){var n=this.config;if(n.angle){var i=n.x+n.width/2,r=n.y+n.height/2,o=n.angle*(Math.PI/180);return{x:(t-i)*Math.cos(o)-(e-r)*Math.sin(o)+i,y:(t-i)*Math.sin(o)+(e-r)*Math.cos(o)+r}}return{x:t,y:e}},t.prototype.setCss=function(t){this.config.css=t},t.prototype.getCss=function(){return(this.config.$selected?"dhx_selected ":"")+(this.config.css||"")},t.prototype.setDefaults=function(t){return t},t.prototype.getCoords=function(t){var e=t.x,n=t.y;return t.dx&&(e=t.x+t.dx),t.dy&&(n=t.y+t.dy),{x:e,y:n}},t}();e.BaseShape=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),r=n(14),o=n(15);e.isEqualObj=function(t,e){for(var n in t)if(t[n]!==e[n])return!1;return!0},e.naturalCompare=function(t,e){var n=[],i=[];for(t.replace(/(\d+)|(\D+)/g,function(t,e,i){n.push([e||1/0,i||""])}),e.replace(/(\d+)|(\D+)/g,function(t,e,n){i.push([e||1/0,n||""])});n.length&&i.length;){var r=n.shift(),o=i.shift(),s=r[0]-o[0]||r[1].localeCompare(o[1]);if(s)return s}return n.length-i.length},e.findByConf=function(t,e){if("function"==typeof e){if(e.call(this,t))return t}else if(e.by&&e.match&&t[e.by]===e.match)return t},e.isDebug=function(){var t=window.dhx;if(void 0!==t)return void 0!==t.debug&&t.debug},e.dhxWarning=function(t){console.warn(t)},e.dhxError=function(t){throw new Error(t)},e.toProxy=function(t){var e=typeof t;return"string"===e?new i.DataProxy(t):"object"===e?t:void 0},e.toDataDriver=function(t){if("string"==typeof t)switch(t){case"csv":return new r.CsvDriver;case"json":return new o.JsonDriver;default:console.warn("incorrect driver type",t)}else if("object"==typeof t)return t}},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(6),a=n(13),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.toSVG=function(){var t=this.config,e=this.getCenter(),n=t.$selected?t.color:"#E4E4E4",i=this.getCoords(t);return o.sv("g",{_key:t.id,transform:"translate("+i.x+","+i.y+") rotate("+(t.angle||0)+","+e.x+","+e.y+")",class:this.getCss(),dhx_id:t.id},[o.sv("rect",{class:"dhx_item_shape",id:t.id,height:t.height,width:t.width,rx:1,ry:1,stroke:n,"stroke-width":1}),a.getTextTemplate(t,this.text()),a.getHeaderTpl(t),a.getCircleTpl(t)])},e.prototype.getMetaInfo=function(){return[{id:"text",label:"Text",type:"text"}]},e.prototype.getCss=function(){return"dhx_diagram_item "+t.prototype.getCss.call(this)},e.prototype.setDefaults=function(t){return t.width=t.width||140,t.height=t.height||90,t},e.prototype.text=function(){return this.config.text},e}(s.BaseShape);e.DiagramCard=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.url=t}return t.prototype.load=function(){return this._ajax(this.url)},t.prototype.save=function(t,e){return this._ajax(this.url,t,{insert:"POST",delete:"DELETE",update:"POST"}[e]||"POST")},t.prototype._ajax=function(t,e,n){return void 0===n&&(n="GET"),new Promise(function(i,r){var o=new XMLHttpRequest;switch(o.onload=function(){o.status>=200&&o.status<300?i(o.response||o.responseText):r({status:o.status,statusText:o.statusText})},o.onerror=function(){r({status:o.status,statusText:o.statusText})},o.open(n,t),o.setRequestHeader("Content-Type","application/json"),n){case"POST":case"DELETE":case"PUT":o.send(JSON.stringify(e));break;case"GET":default:o.send()}})},t}();e.DataProxy=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={applyAll:"Apply all",resetChanges:"Reset Changes",editCard:"Edit Card",color:"Color",position:"Position",size:"Size"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(18));var i=n(36);e.locale=i.default},function(t,e,n){"use strict";function i(t,e,n){var i={top:{x:t.x+t.width/2,y:t.y-e},bottom:{x:t.x+t.width/2,y:t.y+t.height+e},left:{x:t.x-e,y:t.y+t.height/2},right:{x:t.x+t.width+e,y:t.y+t.height/2}};return n?[i[n]||i]:[i.top,i.bottom,i.left,i.right]}Object.defineProperty(e,"__esModule",{value:!0}),e.nearestLinkPath=function(t,e,n,r){t.points=function(t,e,n,r,o){void 0===r&&(r=""),void 0===o&&(o="");for(var s,a,u,l,c,h=i(t,0,r),d=i(e,0,o),p=i(t,n,r),f=i(e,n,o),_=1/0,v=0;v<p.length;v++)for(var y=p[v],g=0;g<f.length;g++){var m=f[g],x=(a=y,l=(u=m).x-a.x,c=u.y-a.y,Math.sqrt(l*l+c*c));if(_>x)if(_=x,y.x===m.x||y.y===m.y)s=h[v].x===y.x&&y.x===d[g].x||h[v].y===y.y&&d[g].y===y.y?[h[v],d[g]]:[h[v],y,m,d[g]];else{var w=y.x<h[v].x&&y.x<m.x,b=y.y>h[v].y&&y.y>m.y,O=h[v].x===y.x||w?{x:y.x,y:m.y}:{x:m.x,y:y.y};O=b?{x:m.x,y:y.y}:O,s=[h[v],y,O,m,d[g]]}}return s}(e,n,r.lineGap,t.fromSide,t.toSide)},e.directLinkPath=function(t,e,n,i){var r=e.x+(e.dx||0),o=e.y+(e.dy||0),s=n.x+(n.dx||0),a=n.y+(n.dy||0);if("vertical"===e.dir){var u=r,l=Math.round(o+e.height/2),c=s,h=Math.round(a+n.height/2),d=.5-Math.round(i.margin.itemX/2);t.points=[{x:u,y:l},{x:u+d,y:l},{x:u+d,y:h},{x:c,y:h}]}else u=Math.round(r+e.width/2),l=o+e.height,c=Math.round(s+n.width/2),h=a,d=Math.round(i.margin.itemY/2)+.5,t.points=[{x:u,y:l},{x:u,y:l+d},{x:c,y:l+d},{x:c,y:h}]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.getCircleTpl=function(t){if(!t.$count&&!1!==t.open)return"";var e="vertical"===t.dir,n=!1===t.open,r=t.width/2,o=t.height/2,s={x:e?0:r,y:e?o:t.height},a=n?i.sv("polyline",{points:s.x-5+","+s.y+"\n\t\t"+s.x+","+s.y+"\n\t\t"+s.x+","+(s.y-5)+"\n\t\t"+s.x+","+(s.y+5)+"\n\t\t"+s.x+","+s.y+"\n\t\t"+(s.x+5)+","+s.y,"stroke-width":"2",stroke:"white",fill:"none"}):i.sv("line",{x1:s.x-5,y1:s.y,x2:s.x+5,y2:s.y,"stroke-width":"2",stroke:"white"});return i.sv("g",{x:s.x,y:s.y,dhx_diagram:"hide",class:n?"dhx_expand_icon":"dhx_hide_icon"},[i.sv("circle",{r:10,cx:s.x,cy:s.y,fill:t.$expandColor}),a])},e.getHeaderTpl=function(t){var e=t.color||"#20b6e2";return i.sv("rect",{height:3.5,width:t.width,class:"dhx_item_header",stroke:e,fill:e,"stroke-width":1})},e.getTextTemplate=function(t,e){return t.text?i.sv("foreignObject",{width:t.width,overflow:"hidden",height:t.height,transform:"translate(0 0)"},[i.el("div",{class:"shape_content",style:"width:"+t.width+"px;height:"+t.height+"px;"},e)]):null}},function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){void 0===t&&(t={});this.config=i({},{skipHeader:0,nameByHeader:!1,row:"\n",column:","},t),this.config.nameByHeader&&(this.config.skipHeader=1)}return t.prototype.getFields=function(t,e){for(var n=t.trim().split(this.config.column),i={},r=0;r<n.length;r++)i[e?e[r]:r+1]=n[r];return i},t.prototype.getRows=function(t){return t.trim().split(this.config.row)},t.prototype.toJsonArray=function(t){var e=this,n=this.getRows(t),i=this.config.names;if(this.config.skipHeader){var r=n.splice(0,this.config.skipHeader);this.config.nameByHeader&&(i=r[0].trim().split(this.config.column))}return n.map(function(t){return e.getFields(t,i)})},t}();e.CsvDriver=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.toJsonArray=function(t){return this.getRows(t)},t.prototype.getFields=function(t){return t},t.prototype.getRows=function(t){return"string"==typeof t?JSON.parse(t):t},t}();e.JsonDriver=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={email:/^[a-z\_\-\.]+@[a-z\_\-]+\.[a-z]{2,}$/i,number:/^\-?[0-9]{1,6}$/,color:/^\#[0-9A-Fa-f]{6}$/,date:/^[0-9]{4}\-[0-9]{1,2}\-[0-9]{1,2}$/};e.validate=function(t,e){var n=!0;return e&&"string"==typeof t&&""!==t&&(n="function"==typeof(e=i[e]||e)?e.call(this,t):!!t.match(e)),n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11);n(37);var r=n(38),o=n(10),s=window.dhx=window.dhx||{};s.i18n=s.i18n||{},s.i18n.setLocale=function(t,e){var n=s.i18n[t];for(var i in e)n[i]=e[i]},s.i18n.diagram=s.i18n.diagram||o.default,window.dhx.DiagramEditor=r.DiagramEditor,window.dhx.Diagram=i.Diagram},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),s=n(2),a=n(0),u=n(4),l=n(5),c=n(20),h=n(12),d=n(21),p=n(22),f=n(23),_=n(29),v=n(35),y=function(t){function e(e,n){var i=t.call(this,e,n)||this;i.version="2.0.0",i._set_defaults(),i._init_events(),i._init_struct(),i.config.toolbar&&(i._toolbar=new v.Toolbar(i.events,i.config.toolbar));var r=a.create({render:function(t){return i._render(t)}},i);return i.mount(e,r),i}return r(e,t),e.prototype.locate=function(t){var e=u.locate(t,"dhx_id");return e?this.data.getItem(e):null},e.prototype.collapseItem=function(t){this.events.fire("BeforeCollapse",[t])&&(this.data.update(t,{open:!1}),this.events.fire("AfterCollapse",[t]))},e.prototype.expandItem=function(t){this.events.fire("BeforeExpand",[t])&&(this.data.update(t,{open:!0}),this.events.fire("AfterExpand",[t]))},e.prototype.getScrollState=function(){var t=this.getRootView().node.el;return{x:t.scrollLeft,y:t.scrollTop}},e.prototype.scrollTo=function(t,e){var n=this.getRootView().node.el;n.scrollLeft=t,n.scrollTop=e},e.prototype.showItem=function(t){var e=this.getRootView().node.el,n=this.data.getItem(t);if(n){var i=n.$shape.getBox(),r=e.offsetWidth/2,o=e.offsetHeight/2;this.scrollTo(i.right+10-r,i.bottom+10-o)}},e.prototype._render=function(t){if(this._doNotRepaint&&t.node)return t.node;this._doNotRepaint=!0;var e=this._getContent(),n=e.size,i=e.content,r=n.x-n.left+2*this.config.margin.x,o=n.y-n.top+2*this.config.margin.y,s="org"===this.config.type?"dhx_organogram":"dhx_free_diagram";n.left-=this.config.margin.x,n.top-=this.config.margin.y;var u=r*this.config.scale,l=o*this.config.scale,c=null;if(this._toolbar){var h=this.selection.getId();h&&(c=this._toolbar.toSVG(this.data.getItem(h),n))}var d=null;return this.config.$svg&&(d=this.config.$svg(n)),a.el(".dhx_diagram",this._htmlevents,[a.el(".dhx_diagram_wrapper",{class:s,style:"width:px; height:px"},[a.sv("svg",{xmlns:"http://www.w3.org/2000/svg",width:u,height:l,viewBox:n.left+" "+n.top+" "+r+" "+o},[a.sv("defs",[a.sv("filter",{x:0,y:0,width:1,height:1,id:"dhx_text_background"},[a.sv("feFlood",{"flood-color":"white"}),a.sv("feComposite",{in:"SourceGraphic"})])]),a.sv("g",{"shape-rendering":1===this.config.scale&&"org"===this.config.type?"crispedges":"auto"},i)]),c,d])])},e.prototype._init_events=function(){var t=this;this._htmlevents={onscroll:function(){t.events.fire("Scroll",[t.getScrollState()])},onmousedown:u.eventHandler(function(e){return t.locate(e)},{dhx_diagram_item:function(e,n){t.events.fire("ShapeMouseDown",[n.id,e])}}),onclick:u.eventHandler(function(e){return t.locate(e)},{dhx_expand_icon:function(e,n){return t.expandItem(n.id)},dhx_hide_icon:function(e,n){return t.collapseItem(n.id)},dhx_diagram_item:function(e,n){t.events.fire("ShapeClick",[n.id]),t.config.select&&t.selection.add(n.id)}}),ondblclick:u.eventHandler(function(e){return t.locate(e)},{dhx_diagram_item:function(e,n){t.events.fire("ShapeDblClick",[n.id])}})}},e.prototype._set_defaults=function(){this.config=s.extend({defaultShapeType:"card",defaultLinkType:"line",lineGap:10,scale:1,margin:{x:40,y:40,itemX:40,itemY:40},gridStep:10},this.config),window.SVGForeignObjectElement||(this.config.defaultShapeType="svg-card")},e.prototype._init_struct=function(){var t=this;this.events=new o.EventSystem(this),this.shapes=f.shapes,this.data=new _.ShapesCollection({init:function(e){var n=e.from?t.config.defaultLinkType:t.config.defaultShapeType;return e.type=e.type||n,e.$shape=f.shapesFactory(e),e},update:function(t){t.$shape.config=t},type:this.config.type},this.events),this.selection=new p.Selection({},this.data,this.events),this.export=new c.Exporter("diagram",this.version,this),this.data.events.on("Change",function(){return t.paint()}),this.data.events.on("AfterSelect",function(){return t.paint()})},e.prototype._getContent=function(){var t=this,e=!1;"org"===this.config.type&&(d.placeOrgonogram(this.data,this.config),e=!0);var n={x:0,y:0,left:0,top:0},i=[],r=[];return this.data.mapVisible(function(o){if(o.$shape.isConnector())e||h.nearestLinkPath(o,t.data.getItem(o.from),t.data.getItem(o.to),t.config),r.push(o.$shape.toSVG());else{var s=o.$shape.getBox();s.right>n.x&&(n.x=s.right),s.left<n.left&&(n.left=s.left),s.bottom>n.y&&(n.y=s.bottom),s.top<n.top&&(n.top=s.top),i.push(o.$shape.toSVG())}}),{size:n,content:r.concat(i)}},e}(l.View);e.Diagram=y},function(t,e,n){
/**
* Copyright (c) 2017, Leon Sorokin
* All rights reserved. (MIT Licensed)
*
* domvm.js (DOM ViewModel)
* A thin, fast, dependency-free vdom view layer
* @preserve https://github.com/leeoniya/domvm (v3.2.6, micro build)
*/var i;i=function(){"use strict";var t=1,e=2,n=3,i=4,r=5,o="undefined"!=typeof window,s=(o?window:{}).requestAnimationFrame,a={};function u(){}var l=Array.isArray;function c(t){return null!=t}function h(t){return null!=t&&t.constructor===Object}function d(t){var e=typeof t;return"string"===e||"number"===e}function p(t){return"function"==typeof t}function f(t){for(var e=arguments,n=1;n<e.length;n++)for(var i in e[n])t[i]=e[n][i];return t}function _(t,e){for(var n=[],i=e;i<t.length;i++)n.push(t[i]);return n}function v(t,e){for(var n in t)if(t[n]!==e[n])return!1;return!0}function y(t,e){var n=t.length;if(e.length!==n)return!1;for(var i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function g(t){if(!s)return t;var e,n,i;function r(){e=0,t.apply(n,i)}return function(){n=this,i=arguments,e||(e=s(r))}}function m(t){return"o"===t[0]&&"n"===t[1]}function x(t){return"_"===t[0]}function w(t){t&&t.el&&t.el.offsetHeight}function b(t){return null!=t.node&&null!=t.node.el}function O(t,e){switch(e){case"value":case"checked":case"selected":return!0}return!1}function C(t){for(t=t||a;null==t.vm&&t.parent;)t=t.parent;return t.vm}function M(){}var k=M.prototype={constructor:M,type:null,vm:null,key:null,ref:null,data:null,hooks:null,ns:null,el:null,tag:null,attrs:null,body:null,flags:0,_class:null,_diff:null,_dead:!1,_lis:!1,idx:null,parent:null};function P(t){var n=new M;return n.type=e,n.body=t,n}var j={},S=/\[(\w+)(?:=(\w+))?\]/g;var L=1,E=2,D=4,V=8;function F(e,n,i,r){var o=new M;o.type=t,c(r)&&(o.flags=r),o.attrs=n;var s=function(t){var e,n,i,r,o=j[t];if(null==o)for(j[t]=o={tag:(e=t.match(/^[-\w]+/))?e[0]:"div",id:(n=t.match(/#([-\w]+)/))?n[1]:null,class:(i=t.match(/\.([-\w.]+)/))?i[1].replace(/\./g," "):null,attrs:null};r=S.exec(t);)null==o.attrs&&(o.attrs={}),o.attrs[r[1]]=r[2]||"";return o}(e);if(o.tag=s.tag,s.id||s.class||s.attrs){var a=o.attrs||{};if(s.id&&!c(a.id)&&(a.id=s.id),s.class&&(o._class=s.class,a.class=s.class+(c(a.class)?" "+a.class:"")),s.attrs)for(var u in s.attrs)c(a[u])||(a[u]=s.attrs[u]);o.attrs=a}var l=o.attrs;return c(l)&&(c(l._key)&&(o.key=l._key),c(l._ref)&&(o.ref=l._ref),c(l._hooks)&&(o.hooks=l._hooks),c(l._data)&&(o.data=l._data),c(l._flags)&&(o.flags=l._flags),c(o.key)||(c(o.ref)?o.key=o.ref:c(l.id)?o.key=l.id:c(l.name)&&(o.key=l.name+("radio"===l.type||"checkbox"===l.type?l.value:"")))),null!=i&&(o.body=i),o}function T(t,n,o,s){if(t.type!==r&&t.type!==i){var a,u,c;t.parent=n,t.idx=o,t.vm=s,null!=t.ref&&(a=C(t),u=t.ref,c=t,function(t,e,n){for(var i;i=e.shift();)0===e.length?t[i]=n:t[i]=t=t[i]||{}}(a,["refs"].concat(u.split(".")),c));var h=t.hooks,d=s&&s.hooks;(h&&(h.willRemove||h.didRemove)||d&&(d.willUnmount||d.didUnmount))&&function(t){for(;t=t.parent;)t.flags|=L}(t),l(t.body)&&function(t){for(var n=t.body,i=0;i<n.length;i++){var r=n[i];!1===r||null==r?n.splice(i--,1):l(r)?(s=r,a=i--,u=1,(o=n).splice.apply(o,[a,u].concat(s))):(null==r.type&&(n[i]=r=P(""+r)),r.type===e?null==r.body||""===r.body?n.splice(i--,1):i>0&&n[i-1].type===e?(n[i-1].body+=r.body,n.splice(i--,1)):T(r,t,i,null):T(r,t,i,null))}var o,s,a,u}(t)}}var A={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,order:!0,lineClamp:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function I(t,e){var n,i,r=(t.attrs||a).style,o=e?(e.attrs||a).style:null;if(null==r||d(r))t.el.style.cssText=r;else{for(var s in r){var u=r[s];(null==o||null!=u&&u!==o[s])&&(t.el.style[s]=(n=s,i=u,isNaN(i)||A[n]?i:i+"px"))}if(o)for(var l in o)null==r[l]&&(t.el.style[l]="")}}var B=[];function H(t,e,n,i,r){if(null!=t){var o=n.hooks[e];if(o){if("d"!==e[0]||"i"!==e[1]||"d"!==e[2])return o(n,i);r?w(n.parent)&&o(n,i):B.push([o,n,i])}}}function z(t){var e;if(B.length)for(w(t.node);e=B.shift();)e[0](e[1],e[2])}var R=o?document:null;function $(t){return t.nextSibling}function N(t,e,n){var i=e._node,r=i.vm;if(l(i.body))if((i.flags&L)===L)for(var o=0;o<i.body.length;o++)N(e,i.body[o].el);else Z(i);delete e._node,t.removeChild(e),H(i.hooks,"didRemove",i,null,n),null!=r&&(H(r.hooks,"didUnmount",r,r.data,n),r.node=null)}function U(t,e){var n=e._node;if(!n._dead){var i,r,o,s,a=function t(e){var n=e.vm,i=null!=n&&H(n.hooks,"willUnmount",n,n.data),r=H(e.hooks,"willRemove",e);if((e.flags&L)===L&&l(e.body))for(var o=0;o<e.body.length;o++)t(e.body[o]);return i||r}(n);null!=a&&("object"==typeof(s=a)&&p(s.then))?(n._dead=!0,a.then((i=N,r=[t,e,!0],function(){return i.apply(o,r)}))):N(t,e)}}function Z(t){for(var e=t.body,n=0;n<e.length;n++){var i=e[n];delete i.el._node,null!=i.vm&&(i.vm.node=null),l(i.body)&&Z(i)}}function G(t){var e=t.el;if(0==(t.flags&L))l(t.body)&&Z(t),e.textContent=null;else{var n=e.firstChild;do{var i=$(n);U(e,n)}while(n=i)}}function W(t,e,n){var i=e._node,r=null!=e.parentNode,o=e!==n&&r?null:i.vm;null!=o&&H(o.hooks,"willMount",o,o.data),H(i.hooks,r?"willReinsert":"willInsert",i),t.insertBefore(e,n),H(i.hooks,r?"didReinsert":"didInsert",i),null!=o&&H(o.hooks,"didMount",o,o.data)}function Y(t,e,n){W(t,e,n?$(n):null)}var X={};var q=u;function Q(t,e,n){t[e]=n}function J(t,e,n,i,r){var o=t.apply(r,e.concat([n,i,r,r.data]));r.onevent(n,i,r,r.data,e),q.call(null,n,i,r,r.data,e),!1===o&&(n.preventDefault(),n.stopPropagation())}function K(t){var e,n,i=function(t){for(;null==t._node;)t=t.parentNode;return t._node}(t.target),r=C(i),o=t.currentTarget._node.attrs["on"+t.type];if(l(o))J(e=o[0],n=o.slice(1),t,i,r);else for(var s in o)if(t.target.matches(s)){var a=o[s];l(a)?(e=a[0],n=a.slice(1)):(e=a,n=[]),J(e,n,t,i,r)}}function tt(t,e,n,i){if(n!==i){var r=t.el;null==n||p(n)?Q(r,e,n):null==i&&Q(r,e,K)}}function et(t,e,n){"."===e[0]&&(e=e.substr(1),n=!0),n?t.el[e]="":t.el.removeAttribute(e)}function nt(t,e,n){var i,r,o,s,u,l,c=t.attrs||a,h=e.attrs||a;if(c===h);else{for(var d in c){var p=c[d],f=O(t.tag,d),_=f?t.el[d]:h[d];p===_||("style"===d?I(t,e):x(d)||(m(d)?tt(t,d,p,_):(r=d,o=p,s=f,u=n,l=void 0,l=(i=t).el,null==o?!u&&et(i,r,!1):null!=i.ns?l.setAttribute(r,o):"class"===r?l.className=o:"id"===r||"boolean"==typeof o||s?l[r]=o:"."===r[0]?l[r.substr(1)]=o:l.setAttribute(r,o))))}for(var d in h)!(d in c)&&!x(d)&&et(t,d,O(t.tag,d)||m(d))}}function it(t,e,n,r){return t.type===i&&(e=t.data,n=t.key,r=t.opts,t=t.view),new gt(t,e,n,r)}function rt(t){for(var e=0;e<t.body.length;e++){var o=t.body[e],s=o.type;if(s<=n)W(t.el,ot(o));else if(s===i){s=(a=it(o.view,o.data,o.key,o.opts)._redraw(t,e,!1)).node.type,W(t.el,ot(a.node))}else if(s===r){var a;(a=o.vm)._redraw(t,e),s=a.node.type,W(t.el,a.node.el)}}}function ot(i,r){var o,s,u,c;return null==i.el&&(i.type===t?(i.el=r||(u=i.tag,null!=(c=i.ns)?R.createElementNS(c,u):R.createElement(u)),null!=i.attrs&&nt(i,a,!0),(i.flags&V)===V&&i.body.body(i),l(i.body)?rt(i):null!=i.body&&""!==i.body&&(i.el.textContent=i.body)):i.type===e?i.el=r||(s=i.body,R.createTextNode(s)):i.type===n&&(i.el=r||(o=i.body,R.createComment(o)))),i.el._node=i,i.el}window.lisMove=lt;var st=1,at=2;function ut(t,e,n,i,r,o,s,a){return function(u,l,c,h,d,p){var f,_;if(null!=h[i]){if(null==(f=h[i]._node))return void(h[i]=t(h[i]));if(f.parent!==u)return _=t(h[i]),null!=f.vm?f.vm.unmount(!0):U(l,h[i]),void(h[i]=_)}if(h[r]==d)return at;if(null==h[r].el)n(l,ot(h[r]),h[i]),h[r]=e(h[r],c);else if(h[r].el===h[i])h[r]=e(h[r],c),h[i]=t(h[i]);else{if(p||f!==h[s])return p&&null!=h[i]?lt(t,e,n,i,r,l,c,f,h):st;_=h[i],h[i]=t(_),a(l,_,h[o]),h[o]=_}}}function lt(t,e,n,i,r,o,s,a,u){if(a._lis)n(o,u[r].el,u[i]),u[r]=e(u[r],s);else{var l=function(t,e){var n,i=0,r=e.length-1;if(r<=2147483647)for(;i<=r;){if(e[n=i+r>>1]===t)return n;e[n]<t?i=n+1:r=n-1}else for(;i<=r;){if(e[n=Math.floor((i+r)/2)]===t)return n;e[n]<t?i=n+1:r=n-1}return i==e.length?null:i}(a.idx,u.tombs);a._lis=!0;var c=t(u[i]);n(o,u[i],null!=l?s[u.tombs[l]].el:l),null==l?u.tombs.push(a.idx):u.tombs.splice(l,0,a.idx),u[i]=c}}var ct=ut($,function(t,e){return e[t.idx+1]},W,"lftSib","lftNode","rgtSib","rgtNode",Y),ht=ut(function(t){return t.previousSibling},function(t,e){return e[t.idx-1]},Y,"rgtSib","rgtNode","lftSib","lftNode",W);function dt(t,e,n,i){for(var r=Array.prototype.slice.call(e.childNodes),o=[],s=0;s<r.length;s++){var a=r[s]._node;a.parent===t&&o.push(a.idx)}for(var u=function(t){var e,n,i=t.slice(),r=[];r.push(0);for(var o=0,s=t.length;o<s;++o){var a=r[r.length-1];if(t[a]<t[o])i[o]=a,r.push(o);else{for(e=0,n=r.length-1;e<n;){var u=(e+n)/2|0;t[r[u]]<t[o]?e=u+1:n=u}t[o]<t[r[e]]&&(e>0&&(i[o]=r[e-1]),r[e]=o)}}for(n=r[(e=r.length)-1];e-- >0;)r[e]=n,n=i[n];return r}(o).map(function(t){return o[t]}),l=0;l<u.length;l++)n[u[l]]._lis=!0;for(i.tombs=u;;){if(ct(t,e,n,i,null,!0)===at)break}}function pt(t){return t.el._node.parent!==t.parent}function ft(t,e,n){return e[n]}function _t(t,e,n){for(;n<e.length;n++){var o=e[n];if(null!=o.vm){if(t.type===i&&o.vm.view===t.view&&o.vm.key===t.key||t.type===r&&o.vm===t.vm)return o}else if(!pt(o)&&t.tag===o.tag&&t.type===o.type&&t.key===o.key&&(t.flags&~L)==(o.flags&~L))return o}return null}function vt(t,e,n){return e[e._keys[t.key]]}function yt(o,s){H(s.hooks,"willRecycle",s,o);var u=o.el=s.el,c=s.body,h=o.body;if(u._node=o,o.type!==e||h===c){null==o.attrs&&null==s.attrs||nt(o,s,!1);var d=l(c),p=l(h),f=(o.flags&V)===V;d?p||f?function(e,o){var s=e.body,u=s.length,l=o.body,c=l.length,h=(e.flags&V)===V,d=(e.flags&E)===E,p=(e.flags&D)===D,f=!d&&e.type===t,_=!0,v=p?vt:d||h?ft:_t;if(p){for(var y={},g=0;g<l.length;g++)y[l[g].key]=g;l._keys=y}if(f&&0===u)return G(o),void(h&&(e.body=[]));var m,x,w=0,O=!1,C=0;if(h)var M={key:null},k=Array(u);for(var g=0;g<u;g++){if(h){var P=!1,j=null;_&&(p&&(M.key=s.key(g)),m=v(M,l,C)),null!=m?(x=m.idx,!0===(j=s.diff(g,m))?((S=m).parent=e,S.idx=g,S._lis=!1):P=!0):P=!0,P&&(T(S=s.tpl(g),e,g),S._diff=null!=j?j:s.diff(g),null!=m&&yt(S,m)),k[g]=S}else{var S=s[g],L=S.type;if(L<=n)(m=_&&v(S,l,C))&&(yt(S,m),x=m.idx);else if(L===i){if(m=_&&v(S,l,C)){x=m.idx;var F=m.vm._update(S.data,e,g)}else var F=it(S.view,S.data,S.key,S.opts)._redraw(e,g,!1);L=F.node.type}else if(L===r){var A=b(S.vm),F=S.vm._update(S.data,e,g,A);L=F.node.type}}if(!p&&null!=m&&(x===C?++C===c&&u>c&&(m=null,_=!1):O=!0,c>100&&O&&++w%10==0))for(;C<c&&pt(l[C]);)C++}h&&(e.body=k);f&&function(t,e){var n=e.body,i=t.el,r=t.body,o={lftNode:r[0],rgtNode:r[r.length-1],lftSib:(n[0]||a).el,rgtSib:(n[n.length-1]||a).el};t:for(;;){for(;;){var s=ct(t,i,r,o,null,!1);if(s===st)break;if(s===at)break t}for(;;){var u=ht(t,i,r,o,o.lftNode,!1);if(u===st)break;if(u===at)break t}dt(t,i,r,o);break}}(e,o)}(o,s):h!==c&&(null!=h?u.textContent=h:G(s)):p?(G(s),rt(o)):h!==c&&(u.firstChild?u.firstChild.nodeValue=h:u.textContent=h),H(s.hooks,"didRecycle",s,o)}else u.nodeValue=h}function gt(t,e,n,i){var r=this;r.view=t,r.data=e,r.key=n,i&&(r.opts=i,r.config(i));var o=h(t)?t:t.call(r,r,e,n,i);p(o)?r.render=o:(r.render=o.render,r.config(o)),r._redrawAsync=g(function(t){return r.redraw(!0)}),r._updateAsync=g(function(t){return r.update(t,!0)}),r.init&&r.init.call(r,r,r.data,r.key,i)}var mt=gt.prototype={constructor:gt,_diff:null,init:null,view:null,key:null,data:null,state:null,api:null,opts:null,node:null,hooks:null,onevent:u,refs:null,render:null,mount:function(t,e){var n=this;e?(G({el:t,flags:0}),n._redraw(null,null,!1),t.nodeName.toLowerCase()!==n.node.tag?(ot(n.node),W(t.parentNode,n.node.el,t),t.parentNode.removeChild(t)):W(t.parentNode,ot(n.node,t),t)):(n._redraw(null,null),t&&W(t,n.node.el));t&&z(n);return n},unmount:function(t){var e=this.node;U(e.el.parentNode,e.el),t||z(this)},config:function(t){var e=this;t.init&&(e.init=t.init),t.diff&&(e.diff=t.diff),t.onevent&&(e.onevent=t.onevent),t.hooks&&(e.hooks=f(e.hooks||{},t.hooks)),t.onemit&&(e.onemit=f(e.onemit||{},t.onemit))},parent:function(){return C(this.node.parent)},root:function(){for(var t=this.node;t.parent;)t=t.parent;return t.vm},redraw:function(t){return t?this._redraw(null,null,b(this)):this._redrawAsync(),this},update:function(t,e){return e?this._update(t,null,null,b(this)):this._updateAsync(t),this},_update:function(t,e,n,i){var r=this;null!=t&&r.data!==t&&(H(r.hooks,"willUpdate",r,t),r.data=t);return r._redraw(e,n,i)},_redraw:function(t,e,n){var i,r,o=null==t,s=this,a=s.node&&s.node.el&&s.node.el.parentNode,u=s.node;if(null!=s.diff&&(i=s._diff,s._diff=r=s.diff(s,s.data),null!=u)){var c=l(i)?y:v,h=i===r||c(i,r);if(h)return xt(s,u,t,e)}a&&H(s.hooks,"willRedraw",s,s.data);var d=s.render.call(s,s,s.data,i,r);if(d===u)return xt(s,u,t,e);s.refs=null,null!=s.key&&d.key!==s.key&&(d.key=s.key);s.node=d,t?(T(d,t,e,s),t.body[e]=d):u&&u.parent?(T(d,u.parent,u.idx,s),u.parent.body[u.idx]=d):T(d,null,null,s);if(!1!==n)if(u)if(u.tag!==d.tag||u.key!==d.key){u.vm=d.vm=null;var p=u.el.parentNode,f=$(u.el);U(p,u.el),W(p,ot(d),f),u.el=d.el,d.vm=s}else yt(d,u);else ot(d);a&&H(s.hooks,"didRedraw",s,s.data),o&&a&&z(s);return s},_redrawAsync:null,_updateAsync:null};function xt(t,e,n,i){return null!=n&&(n.body[i]=e,e.idx=i,e.parent=n,e._lis=!1),t}function wt(t,e,n,i){var r,o;return null==n?h(e)?r=e:o=e:(r=e,o=n),F(t,r,o,i)}var bt="http://www.w3.org/2000/svg";function Ot(t,e,n,i){this.view=t,this.data=e,this.key=n,this.opts=i}function Ct(t){this.vm=t}Ot.prototype={constructor:Ot,type:i,view:null,data:null,key:null,opts:null},Ct.prototype={constructor:Ct,type:r,vm:null};var Mt={config:function(t){var e;q=t.onevent||q,t.onemit&&(e=t.onemit,f(X,e))},ViewModel:gt,VNode:M,createView:it,defineElement:wt,defineSvgElement:function(t,e,n,i){var r=wt(t,e,n,i);return r.ns=bt,r},defineText:P,defineComment:function(t){var e=new M;return e.type=n,e.body=t,e},defineView:function(t,e,n,i){return new Ot(t,e,n,i)},injectView:function(t){return new Ct(t)},injectElement:function(e){var n=new M;return n.type=t,n.el=n.key=e,n},lazyList:function(t,e){var n=t.length,i={items:t,length:n,key:function(n){return e.key(t[n],n)},diff:function(n,i){var r=e.diff(t[n],n);if(null==i)return r;var o=i._diff;return(r===o||l(o)?y(r,o):v(r,o))||r},tpl:function(n){return e.tpl(t[n],n)},map:function(t){return e.tpl=t,i},body:function(t){for(var e=Array(n),r=0;r<n;r++){var o=i.tpl(r);o._diff=i.diff(r),e[r]=o,T(o,t,r)}t.body=e}};return i},FIXED_BODY:E,DEEP_REMOVE:L,KEYED_LIST:D,LAZY_LIST:V};function kt(t){var e,n,i=arguments,r=i.length;if(r>1){var o=1;h(i[1])&&(n=i[1],o=2),e=r===o+1&&(d(i[o])||l(i[o])||n&&(n._flags&V)===V)?i[o]:_(i,o)}return F(t,n,e)}return k.patch=function(t,e){!function(t,e,n){if(null!=e.type){if(null!=t.vm)return;T(e,t.parent,t.idx,null),t.parent.body[t.idx]=e,yt(e,t),n&&w(e),z(C(e))}else{var i=Object.create(t);i.attrs=f({},t.attrs);var r=f(t.attrs,e);if(null!=t._class){var o=r.class;r.class=null!=o&&""!==o?t._class+" "+o:t._class}nt(t,i),n&&w(t)}}(this,t,e)},mt.emit=function(t){var e=this,n=e,i=_(arguments,1).concat(n,n.data);do{var r=e.onemit,o=r?r[t]:null;if(o){o.apply(e,i);break}}while(e=e.parent());X[t]&&X[t].apply(e,i)},mt.onemit=null,mt.body=function(){return function t(e,n){var i=e.body;if(l(i))for(var r=0;r<i.length;r++){var o=i[r];null!=o.vm?n.push(o.vm):t(o,n)}return n}(this.node,[])},Mt.defineElementSpread=kt,Mt.defineSvgElementSpread=function(){var t=kt.apply(null,arguments);return t.ns=bt,t},Mt},t.exports=i()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,n){this._name=t,this._version=e,this._view=n}return t.prototype.pdf=function(t){this._rawExport(t,"pdf",this._view)},t.prototype.png=function(t){this._rawExport(t,"png",this._view)},t.prototype._rawExport=function(t,e,n){(t=t||{}).url=t.url||"https://export.dhtmlx.ru/"+this._name+"/"+e,t.url+="/"+this._version;var i=n.getRootView().node.el.innerHTML,r=document.createElement("form");r.style.cssText="position:absolute; left:-1000px; visibility:hidden;",r.setAttribute("method","POST"),r.setAttribute("action",t.url),r.innerHTML="<input type='hidden' name='raw'><input type='hidden' name='config'>",r.childNodes[0].value=i,r.childNodes[1].value=JSON.stringify(t),document.body.appendChild(r),r.submit(),setTimeout(function(){r.parentNode.removeChild(r)},100)},t}();e.Exporter=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(12),r=["#FF9800","#607D8B","#00C7B5","#03A9F4","#9575CD","#F06292"];e.placeOrgonogram=function(t,e){var n=t.getRoots();if(1===n.length){var o=t.getItem(n[0]);!function t(e,n,i,r,o){var s=n.$kids,a="vertical"===n.dir,u=a?i.margin.itemX/2:0,l=0;if(!1!==n.open&&s){for(var c=0,h=0;h<s.length;h++){var d=e.getItem(s[h][1]);if(!d.hidden){var p=t(e,d,i,r+u,u);a?l=Math.max(l,p):l+=p,c++}}c&&!a&&(l+=(c-1)*i.margin.itemX),n.$count=c}if(l=Math.max(n.width,l),a)n.x=r;else{var f=i.gridStep||1,_=(l-n.width)/2+r;n.x=Math.ceil(_/f)*f}return n.y=0,n.$width=l,l+o}(t,o,e,0,0),function t(e,n,o,s,a,u){var l=n.$kids,c="vertical"===n.dir,h=0;if(n.x+=o,n.y+=s,a.gridStep&&(n.y=Math.ceil(n.y/a.gridStep)*a.gridStep),s+=n.height+a.margin.itemY,!1!==n.open&&l)for(var d=void 0,p=0;p<l.length;p++)if(!(d=e.getItem(l[p][1])).hidden){var f=t(e,d,o,s,a,u+1);c?(s+=f+a.margin.itemY,h+=f+a.margin.itemY):(h=Math.max(h,f+a.margin.itemY),o+=d.$width+a.margin.itemX),i.directLinkPath(e.getItem(l[p][0]),n,d,a)}if(l){var _=e.getItem(l[0][1]).color;n.$expandColor=_||r[(u+1)%r.length]}return n.color=n.color||r[u%r.length],n.height+h}(t,o,0,0,e,0)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=function(){function t(t,e,n){var r=this;this.events=n||new i.EventSystem,this._data=e,this._data.events.on("RemoveAll",function(){r._selected=null}),this._data.events.on("Change",function(){if(r._selected){var t=r._data.getNearId(r._selected);t!==r._selected&&(r._selected=null,t&&r.add(t))}})}return t.prototype.getId=function(){return this._selected},t.prototype.getItem=function(){return this._selected?this._data.getItem(this._selected):null},t.prototype.remove=function(t){return!(t=t||this._selected)||!!this.events.fire("BeforeUnSelect",[t])&&(this._data.update(t,{$selected:!1},!0),this._selected=null,this.events.fire("AfterUnSelect",[t]),!0)},t.prototype.add=function(t){this._selected!==t&&(this.remove(),this.events.fire("BeforeSelect",[t])&&(this._selected=t,this._data.update(t,{$selected:!0},!0),this.events.fire("AfterSelect",[t])))},t}();e.Selection=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(24),r=n(8),o=n(25),s=n(26),a=n(27),u=n(28);for(var l in e.shapes={line:i.Line,dash:i.Line,card:r.DiagramCard,"img-card":o.DiagramImgCard,"svg-card":s.DiagramSvgCard,text:u.TextShape},a.renders)e.shapes[l]=a.FlowShape;e.shapesFactory=function(t){var n=e.shapes[t.type];return n||(n=e.shapes.card),new n(t)}},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.isConnector=function(){return!0},e.prototype.toSVG=function(){return o.sv("g",{dhx_id:"",_key:this.config.id,class:"dhx_diagram_connector "+this.getCss()},[o.sv("polyline",{points:this._getPoints(),class:"dhx_diagram_line ","stroke-dasharray":this._getType(),"stroke-linejoin":"round"}),this._getArrowLine()])},e.prototype._getType=function(){if(this.config.type)switch(this.config.type){case"line":return"";case"dash":return"5, 5";default:return""}},e.prototype._getPoints=function(){return this._getStringPoints()},e.prototype._getStringPoints=function(){return this.config.points.map(function(t){return t.x+","+t.y}).join(" ")},e.prototype._getArrowLine=function(){var t=this.config.arrow,e=this.config.points;return t?"forward"===t?this._arrow(e[e.length-2],e[e.length-1]):"back"===t?this._arrow(e[1],e[0]):"both"===t?[this._arrow(e[e.length-2],e[e.length-1]),this._arrow(e[1],e[0])]:void 0:null},e.prototype._arrow=function(t,e){var n=t.x!==e.x,i=(n?t.x<e.x:t.y<e.y)?1:-1,r=e.x-(n?i:0),s=e.y-(n?0:i),a=e.x-(n?7*i:5*i),u=e.y-(n?5:7*i),l=e.x+(n?-7*i:5*i),c=e.y-(n?-5:7*i);return o.sv("path",{d:"M"+a+","+u+" L"+r+","+s+" L"+l+","+c+" Z",class:"dhx_diagram_arrow","shape-rendering":"auto"})},e}(n(6).BaseShape);e.Line=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getMetaInfo=function(){return[{id:"title",label:"Title",type:"text"},{id:"text",label:"Text",type:"text"},{id:"img",label:"Image",type:"image"}]},e.prototype.setDefaults=function(t){return t.width=t.width||210,t.height=t.height||90,t},e.prototype.getCss=function(){return"dhx_diagram_image "+t.prototype.getCss.call(this)},e.prototype.text=function(){var t=this.config;return[o.el("div",{class:"dhx_context_img",style:"background-image:url("+(t.img||"")+");background-color:"+t.color+";"}),o.el("div",{class:"dhx_context_title"},[t.title||null]),o.el("div",{class:"dhx_context_text"},[t.text||null])]},e}(n(8).DiagramCard);e.DiagramImgCard=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(8),a=n(13),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.toSVG=function(){var t=this.config,e=this.getCenter(),n=t.$selected?t.color:"#E4E4E4",i=this.getCoords(t);return o.sv("g",{transform:"translate("+i.x+","+i.y+") rotate("+(t.angle||0)+","+e.x+","+e.y+")",class:this.getCss(),dhx_id:t.id},[o.sv("rect",{class:"dhx_item_shape",id:t.id,height:t.height,width:t.width,rx:1,ry:1,stroke:n,"stroke-width":1}),o.sv("text",{y:t.height/2,dy:"-5",x:t.width/2,"text-anchor":"middle"},[t.title?o.sv("tspan",{class:"dhx_content_title"},[t.title||""]):null,o.sv("tspan",{class:"dhx_content_text",x:t.width/2,dy:t.title?"1.5em":".5em"},[t.title||""])]),a.getHeaderTpl(t),a.getCircleTpl(t)])},e.prototype.getMetaInfo=function(){return[{id:"title",label:"Title",type:"text"},{id:"text",label:"Text",type:"text"}]},e.prototype.getCss=function(){return"dhx_diagram_svg-card "+(t.prototype.getCss.call(this)||"")},e}(s.DiagramCard);e.DiagramSvgCard=u},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r(n,t),n.prototype.toSVG=function(){var t=this.config,e=this.getCenter(),n=this.getCoords(t);return o.sv("g",{_key:t.id,transform:"translate("+n.x+","+n.y+") rotate("+(t.angle||0)+","+e.x+","+e.y+")",class:"dhx_diagram_item "+this.getCss(),dhx_id:t.id},[this._shapeLine(),this._getExtraLines(),this._getText()])},n.prototype.setDefaults=function(t){return t.width=t.width||140,t.height=t.height||90,t},n.prototype._shapeLine=function(){return o.sv("path",{d:this._getPoints(),class:"dhx_diagram_flow_shape dhx_item_shape ",stroke:"#888",fill:"white","stroke-width":1})},n.prototype._getPoints=function(){return(0,e.renders[this.config.type])(this.config.width,this.config.height,Math.round(this.config.width/12))},n.prototype._getExtraLines=function(){if(e.extraLines[this.config.type])return e.extraLines[this.config.type](this.config.width,this.config.height,Math.round(this.config.width/12))},n.prototype._getText=function(){var t=this.config;if(t.text){var e=t.text.split(/\r?\n/).filter(function(t){return t.trim()}),n=1===e.length?.35:.6,i=e.map(function(e){var i=o.sv("tspan",{class:"dhx_content_text",x:t.width/2,dy:n+"em"},e.trim());return n=1.2,i});return o.sv("text",{y:t.height/(e.length+1),x:t.width/2,"text-anchor":"middle"},i)}},n}(n(6).BaseShape);function a(t,e){return"\n\tM "+t/2+" 0 A "+e/2+","+e/2+" 0 1 0 "+t/2+","+e+"\n\tA "+e/2+","+e/2+" 0 1 0 "+t/2+",0 Z"}function u(t,e){return"\n\tM 0,0\n\t"+t+",0\n\t"+t/2+","+e+" Z"}function l(t,e){return"\n\tM "+e/2+" 0 A "+e/2+","+e/2+" 0 1 0 "+e/2+","+e+"\n\tH "+(t-e/2)+" A "+e/2+","+e/2+" 0 1 0 "+(t-e/2)+",0 H "+e/2+" Z"}function c(t,e){return"M 0,0 L 0,"+e+" L "+t+","+e+" L "+t+",0 Z"}e.FlowShape=s,e.extraLines={database:function(t,e,n){return o.sv("path",{d:"M 0 "+n+" A "+t/2+","+n+" 0 1 0 "+t+","+n,fill:"none",class:"dhx_diagram_extra_lines"})},internal:function(t,e,n){return o.sv("path",{d:"M "+n+" 0 V "+e+" M 0 "+n+" H "+t,class:"dhx_diagram_extra_lines"})},offline:function(t,e,n){var i=e/Math.sqrt(Math.pow(t/2,2)+Math.pow(e,2)),r=Math.sqrt(Math.pow(n/i,2)-Math.pow(n,2));return o.sv("path",{d:"M "+(t/2-r)+" "+(e-n)+" h "+2*r,class:"dhx_diagram_extra_lines"})},subroutine:function(t,e,n){return o.sv("path",{d:"M "+n+" 0 V "+e+" M "+(t-n)+" 0 V "+e,class:"dhx_diagram_extra_lines"})},or:function(t,e){return o.sv("path",{d:"\n\t\t\t\tM"+(t-e)/2+" "+e/2+" "+(t-(t-e)/2)+" "+e/2+"\n\t\t\t\tM"+t/2+" 0 "+t/2+" "+e,class:"dhx_diagram_extra_lines"})},junction:function(t,e){return o.sv("path",{d:"\n\t\t\tM "+(t/2-e*Math.SQRT2/4)+" "+(e/2-e*Math.SQRT2/4)+" L "+(t/2+e*Math.SQRT2/4)+" "+(e/2+e*Math.SQRT2/4)+"\n\t\t\tM "+(t/2-e*Math.SQRT2/4)+" "+(e/2+e*Math.SQRT2/4)+" L "+(t/2+e*Math.SQRT2/4)+" "+(e/2-e*Math.SQRT2/4),class:"dhx_diagram_extra_lines"})},roll:function(t,e){return o.sv("path",{d:"M "+t/2+" "+e+" H "+t,stroke:"#DEDEDE","stroke-width":"2px",class:"dhx_item_shape "})}},e.renders={circle:a,rectangle:c,triangle:function(t,e){return"M "+t/2+" 0 L"+t+" "+e+" L 0 "+e+" z"},start:l,end:l,process:c,output:function(t,e,n){return"\n\tM "+2*n+",0\n\t"+t+",0\n\t"+(t-2*n)+","+e+"\n\t0,"+e+" Z"},decision:function(t,e){return"M 0 "+e/2+" L "+t/2+" 0 L "+t+" "+e/2+" L "+t/2+" "+e+" Z"},display:function(t,e){return"\n\tM 0 "+e/2+" L "+t/4+" 0 H "+3*t/4+"\n\tA "+e/2+","+e/2+" 0 1 1 "+3*t/4+","+e+"\n\tH "+t/4+" Z"},document:function(t,e){return"M0 "+e+" C\n\t"+t/6+" "+10*e/9+",\n\t"+t/3+" "+10*e/9+",\n\t"+t/2+" "+e+" S\n\t"+5*t/6+" "+8*e/9+",\n\t"+t+" "+e+"\n\tV 0 H 0 Z"},data:function(t,e,n){return"M "+n+" 0 Q\n\t"+-n+" "+e/2+",\n\t"+n+" "+e+" H "+t+" Q\n\t"+(t-2*n)+" "+e/2+",\n\t"+t+" 0 Z"},database:function(t,e,n){return"M 0 "+n+" A "+t/2+","+n+" 0 1 0 "+t+","+n+"\n\tA "+t/2+","+n+" 0 1 0 0,"+n+"\n\tV "+e+" H "+t+" V "+n},internal:c,offline:u,delay:function(t,e){return"\n\tM 0 0 H "+3*t/4+"\n\tA "+e/2+","+e/2+" 0 1 1 "+3*t/4+","+e+"\n\tH 0 Z"},page:function(t,e){return"\n\tM 0,0\n\t"+t+",0\n\t"+t+","+e/2+"\n\t"+t/2+","+e+"\n\t0,"+e/2+" Z"},input:function(t,e){return"\n\tM 0,"+e/6+"\n\t"+t+","+-e/6+"\n\t"+t+","+e+"\n\t0,"+e+" Z"},operation:function(t,e){return"\n\tM 0,0\n\t"+t+",0\n\t"+3*t/4+","+e+"\n\t"+t/4+","+e+" Z"},punchcard:function(t,e){return"\n\tM 0,"+e/4+"\n\t"+t/4+",0\n\t"+t+",0\n\t"+t+","+e+"\n\t0,"+e+" Z"},subroutine:c,comment:function(t,e){return"M "+t+" 0 H 0 V "+e+" H"+t+" V"+(e-4)+" H4 V4 H"+t},storage:u,extract:function(t,e){return"\n\tM 0,"+e+"\n\t"+t+","+e+"\n\t"+t/2+",0 Z"},collate:function(t,e){return"M "+t/2+" "+e/2+" L 0 0 H "+t+" L 0 "+e+" H "+t+" Z"},or:a,junction:a,keyring:function(t,e,n){return"\n\tM "+n+" 0 A "+n+","+e/2+" 0 1 0 "+n+","+e+"\n\tH "+(t-n)+" A "+n+","+e/2+" 0 1 0 "+(t-n)+",0 H "+n+" Z"},tape:function(t,e){return"\n\tM0 "+e+" C\n\t"+t/6+" "+10*e/9+",\n\t"+t/3+" "+10*e/9+",\n\t"+t/2+" "+e+" S\n\t"+5*t/6+" "+8*e/9+",\n\t"+t+" "+e+"\n\tV 0 C\n\t"+5*t/6+" "+-e/9+",\n\t"+2*t/3+" "+-e/9+",\n\t"+t/2+" 0 S\n\t"+1*t/6+" "+e/9+",\n\t0 0 Z"},preparation:function(t,e){return"M 0,"+e/2+" L20 0 L"+(t-20)+" 0 L"+t+" "+e/2+" L"+(t-20)+" "+e+" L20 "+e},endpoint:function(t,e){return"M0 "+e/2+"  L"+t/2+" 0 L "+t/2+" "+e+" z"},roll:a}},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.toSVG=function(){var t=this.config,e=this.getCoords(t);return o.sv("g",{_key:t.id,transform:"translate("+e.x+","+e.y+") ","text-anchor":"middle",class:"dhx_item_shape "+this.getCss(),dhx_id:t.id},[this._getText()])},e.prototype._getText=function(){var t=this.config;if(t.text){var e=t.text.split(/\r?\n/).filter(function(t){return t.trim()}),n=1===e.length?0:.6,i=e.map(function(t){var e=o.sv("tspan",{x:0,dy:n+"em"},t.trim());return n=1.2,e});return o.sv("text",{y:t.height,x:t.width,"text-anchor":"middle",class:"dhx_item_text"},i)}},e}(n(6).BaseShape);e.TextShape=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._roots=[],i._orgMode="org"===e.type,i.events.on("Change",function(t,e,n){"remove"===e&&(i._removeNested(n),i._removeCore(n.$parent)),"add"===e&&n.parent&&i._addCore({from:n.parent,to:n.id},-1),i._mark_chains()}),i}return r(e,t),e.prototype.getNearId=function(t){var e=this._pull[t];if(!e)return this._order[0]||"";for(var n=e;this._orgMode&&n.$parent;)if(!1===(n=this._pull[this._pull[n.$parent].from]).open)return n.id;return e.id},e.prototype.mapVisible=function(t){var e=this,n=[];if(this._orgMode)for(var i=this.getRoots(),r=0;r<i.length;r++)this._eachBranch(this.getItem(i[r]),t,n);else this.map(function(i){i.hidden||i.$shape.isConnector()&&(e.getItem(i.from).hidden||e.getItem(i.to).hidden)||n.push(t(i))});return n},e.prototype.getRoots=function(){return this._roots},e.prototype._removeNested=function(t){var e=t.$kids;if(e)for(var n=0;n<e.length;n++)this._orgMode&&(this._removeNested(this.getItem(e[n][1])),this._removeCore(e[n][1])),this._removeCore(e[n][0])},e.prototype._eachBranch=function(t,e,n){if(!t.hidden&&(n.push(e(t)),!1!==t.open)){var i=t.$kids;if(i)for(var r=0;r<i.length;r++){var o=this.getItem(i[r][1]);o.hidden||(n.push(e(this.getItem(i[r][0]))),this._eachBranch(o,e,n))}}},e.prototype._parse_data=function(e){for(var n=[],i=!1,r=0;r<e.length;r++){var o=e[r];o.parent&&!i&&n.push({from:o.parent,to:o.id}),o.from&&(i=!0)}n.length&&!i&&(e=e.concat(n)),t.prototype._parse_data.call(this,e)},e.prototype._mark_chains=function(){var t=this;this._roots=[];var e={},n={};this.map(function(t){if(t.$shape.isConnector()){var i=t;n[i.to]=i.id,(e[i.from]=e[i.from]||[]).push([t.id,i.to])}}),this.map(function(i){i.$shape.isConnector()||(i.$parent=n[i.id],i.$kids=e[i.id],i.$parent||t._roots.push(i.id))})},e}(n(30).DataCollection);e.ShapesCollection=o},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(31)),i(n(9)),i(n(7)),i(n(14)),i(n(15))},function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(32),s=n(33),a=n(34),u=n(9),l=n(7),c=n(2),h=function(){function t(t,e){this._order=[],this._pull={},this._changes={order:[]},this._initOrder=null,this.config=t||{},this._copier=new o.Copier(this),this._sort=new a.Sort(this),this._loader=new s.Loader(this,this._changes),this.events=e||new r.EventSystem(this)}return t.prototype.add=function(t,e){this.events.fire("BeforeAdd",[t])&&(this._addCore(t,e),this._onChange("add",t.id,t),this.events.fire("AfterAdd",[t]))},t.prototype.remove=function(t){var e=this._pull[t];e&&(this._removeCore(e.id),this._onChange("remove",t,e))},t.prototype.removeAll=function(){this._removeAll(),this.events.fire("Change")},t.prototype.exists=function(t){return!!this._pull[t]},t.prototype.getNearId=function(t){if(!this._pull[t])return this._order[0]||""},t.prototype.getItem=function(t){return this._pull[t]},t.prototype.update=function(t,e,n){var r=this.getItem(t);if(r){if(l.isEqualObj(e,r))return;e.id&&t!==e.id?(l.dhxWarning("this method doesn't allow change id"),l.isDebug()):(e=this._pull[t]=i({},this._pull[t],e),this.config.update&&this.config.update(e),n||this._onChange("update",t,this._pull[t]))}else l.dhxWarning("item not found")},t.prototype.getIndex=function(t){var e=this._order.indexOf(t);return this._pull[t]&&e>=0?e:-1},t.prototype.getId=function(t){return this._order[t]},t.prototype.filter=function(t,e){var n=this;if(e||(this._order=this._initOrder||this._order,this._initOrder=null),t){var i=this._order.filter(function(e){return"function"==typeof t?t(n._pull[e]):n._pull[e][t.by]===t.match});this._initOrder||(this._initOrder=this._order,this._order=i)}this.events.fire("Change")},t.prototype.find=function(t){for(var e in this._pull){var n=l.findByConf(this._pull[e],t);if(n)return n}return null},t.prototype.findAll=function(t){var e=[];for(var n in this._pull){var i=l.findByConf(this._pull[n],t);i&&e.push(i)}return e},t.prototype.sort=function(t){this._sort.sort(this._order,t),this._initOrder&&this._initOrder.length&&this._sort.sort(this._initOrder,t),this.events.fire("Change")},t.prototype.copy=function(t,e,n){return this._copier.copy(t,e,n)},t.prototype.move=function(t,e,n){return this._copier.move(this._order,t,e,n)},t.prototype.load=function(t,e){return"string"==typeof t&&(t=new u.DataProxy(t)),this._loader.load(t,e)},t.prototype.parse=function(t,e){return this._removeAll(),this._loader.parse(t,e)},t.prototype.$parse=function(t){var e=this.config.approximate;e&&(t=this._approximate(t,e.value,e.maxNum)),this._parse_data(t),this.events.fire("Change"),this.events.fire("Load")},t.prototype.save=function(t){this._loader.save(t)},t.prototype.isSaved=function(){return!this._changes.order.length},t.prototype.map=function(t){for(var e=[],n=0;n<this._order.length;n++)e.push(t.call(this,this.getItem(this._order[n]),n));return e},t.prototype.serialize=function(){return this.map(function(t){return t})},t.prototype._removeAll=function(){this._pull={},this._order=[],this._changes.order=[],this._initOrder=null},t.prototype._addCore=function(t,e){this.config.init&&(t=this.config.init(t)),t.id=t.id||c.uid(),this._pull[t.id]&&l.dhxError("Item already exist"),this._initOrder&&this._initOrder.length&&this._addToOrder(this._initOrder,t,e),this._addToOrder(this._order,t,e)},t.prototype._removeCore=function(t){this.getIndex(t)>=0&&(this._order=this._order.filter(function(e){return e!==t}),delete this._pull[t]),this._initOrder&&this._initOrder.length&&(this._initOrder=this._initOrder.filter(function(e){return e!==t}))},t.prototype._parse_data=function(t){for(var e=this._order.length,n=0,i=t;n<i.length;n++){var r=i[n];this.config.init&&(r=this.config.init(r)),r.id=r.id||c.uid(),this._pull[r.id]=r,this._order[e++]=r.id}},t.prototype._approximate=function(t,e,n){for(var i=t.length,r=e.length,o=Math.floor(i/n),s=Array(Math.ceil(i/o)),a=0,u=0;u<i;u+=o){for(var l=c.copy(t[u]),h=Math.min(i,u+o),d=0;d<r;d++){for(var p=0,f=u;f<h;f++)p+=t[f][e[d]];l[e[d]]=p/(h-u)}s[a++]=l}return s},t.prototype._onChange=function(t,e,n){for(var r=0,o=this._changes.order;r<o.length;r++){var s=o[r];if(s.id===e&&!s.saving)return s.error&&(s.error=!1),s=i({},s,{obj:n,status:t}),void this.events.fire("Change",[e,t,n])}this._changes.order.push({id:e,status:t,obj:n,saving:!1}),this.events.fire("Change",[e,t,n])},t.prototype._addToOrder=function(t,e,n){n&&t[n]?(this._pull[e.id]=e,t.splice(n,0,e.id)):(this._pull[e.id]=e,t.push(e.id))},t}();e.DataCollection=h},function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),o=function(){function t(t){this._parent=t}return t.prototype.copy=function(t,e,n){if(!this._parent.exists(t))return null;var o=r.uid();return n?n.exists(t)?(n.add(i({},this._parent.getItem[t],{id:o}),e),o):(n.add(this._parent.getItem(t),e),t):(this._parent.add(i({},this._parent.getItem(t),{id:o}),e),o)},t.prototype.move=function(t,e,n,i){if(i&&this._parent.exists(e)){var o=this._parent.getItem(e);return i.exists(e)&&(o.id=r.uid()),i.add(o,n),this._parent.remove(o.id),o.id}return this._parent.getIndex(e)===n?null:(t.splice(n,0,t.splice(this._parent.getIndex(e),1)[0]),e)},t}();e.Copier=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),r=function(){function t(t,e){this._parent=t,this._changes=e}return t.prototype.load=function(t,e){var n=this;return this._parent.loadData=t.load().then(function(t){n._parent.removeAll(),n.parse(t,e)})},t.prototype.parse=function(t,e){void 0===e&&(e="json"),t=(e=i.toDataDriver(e)).toJsonArray(t),this._parent.$parse(t)},t.prototype.save=function(t){for(var e=this,n=function(n){if(n.saving||n.pending)i.dhxWarning("item is saving");else{var o=r._findPrevState(n.id);if(o&&o.saving){var s=new Promise(function(r,s){o.promise.then(function(){n.pending=!1,r(e._setPromise(n,t))}).catch(function(r){e._removeFromOrder(o),e._setPromise(n,t),i.dhxWarning(r),s(r)})});r._addToChain(s),n.pending=!0}else r._setPromise(n,t)}},r=this,o=0,s=this._changes.order;o<s.length;o++){n(s[o])}this._parent.saveData.then(function(){e._saving=!1})},t.prototype._setPromise=function(t,e){var n=this;return t.promise=e.save(t.obj,t.status),t.promise.then(function(){n._removeFromOrder(t)}).catch(function(e){t.saving=!1,t.error=!0,i.dhxError(e)}),t.saving=!0,this._saving=!0,this._addToChain(t.promise),t.promise},t.prototype._addToChain=function(t){this._parent.saveData&&this._saving?this._parent.saveData=this._parent.saveData.then(function(){return t}):this._parent.saveData=t},t.prototype._findPrevState=function(t){for(var e=0,n=this._changes.order;e<n.length;e++){var i=n[e];if(i.id===t)return i}return null},t.prototype._removeFromOrder=function(t){this._changes.order=this._changes.order.filter(function(e){return!i.isEqualObj(e,t)})},t}();e.Loader=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),r=function(){function t(t){this._parent=t}return t.prototype.sort=function(t,e){var n=this;e.rule&&"function"==typeof e.rule?this._sort(t,e):e.by&&(e.rule=function(t,r){var o=n._checkVal(e.as,t[e.by]),s=n._checkVal(e.as,r[e.by]);return i.naturalCompare(o,s)},this._sort(t,e))},t.prototype._checkVal=function(t,e){return t?t.call(this,e):e},t.prototype._sort=function(t,e){var n=this,i={asc:1,desc:-1};return t.sort(function(t,r){var o=n._parent.getItem(t),s=n._parent.getItem(r);return e.rule.call(n,o,s)*(i[e.dir]||i.asc)})},t}();e.Sort=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(4),o=function(){function t(t,e){this.config={height:50,iconWidth:36,gap:20,icons:e},this.events=t}return t.prototype.toSVG=function(t,e){var n=this,o=this.config,s=this._getIcons(t,o.icons),a=o.iconWidth*s.length+o.gap,u=this._getCoords(t,a,o.height);return i.el("div",{class:"dhx_popup_toolbar",style:"\n\t\t\theight:"+this.config.height+"px;\n\t\t\twidth:"+this.config.width+"px;\n\t\t\ttop:"+(u.y-e.top)+"px;\n\t\t\tleft:"+(u.x-e.left)+"px;",onclick:r.eventHandler(function(t){return r.locate(t)},{dhx_icon:function(t,e){n.events.fire("ShapeIconClick",[e])}})},[i.el("div",{class:"dhx_item_toolbar"},s)])},t.prototype._getIcons=function(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r];if(!o.check||o.check(t)){var s=o.css?o.css(t):"",a={_key:o.id,class:"dhx_icon "+s,dhx_id:o.id},u="function"==typeof o.content?o.content(t):o.content;"string"==typeof u?(a[".innerHTML"]=u,n.push(i.el("div",a))):n.push(i.el("div",a,[u]))}}return n},t.prototype._getCoords=function(t,e,n){var i=t.$shape.getBox();return{x:i.right/2+i.left/2-e/2,y:i.top-n-10}},t}();e.Toolbar=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={applyAll:"Apply all",resetChanges:"Reset Changes",editCard:"Edit Card",color:"Color",position:"Position",size:"Size"}},function(t,e){},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),s=n(1),a=n(5),u=n(11),l=n(39),c=n(42),h=n(44),d=n(45),p=n(47),f=n(62),_=function(t){function e(e,n){var i=this,r=o.extend({shapeType:"card",gridStep:10,reserveWidth:100},n);return(i=t.call(this,e,r)||this).version="2.0.0",i.events=new s.EventSystem(i),i._initUI(e),i._setHandlers(),i}return r(e,t),e.prototype.paint=function(){this._layout.paint(),this._diagram.paint()},e.prototype.import=function(t){this._diagram.data.parse(t.data.serialize())},e.prototype.parse=function(t){this._diagram.data.parse(t)},e.prototype.serialize=function(){return this._diagram.data.serialize()},e.prototype._initUI=function(t){var e=this,n=this._layout=new l.Layout(t,{height:"100%",rows:[{id:"top",css:"dhx_topbar shadow-bottom"},{css:"flex editor",cols:[{id:"center",css:"flex"},{id:"right",css:"sidebar"}]}]});this._diagram=new u.Diagram(null,{type:"org",select:!0,toolbar:c.buttons,defaultShapeType:this.config.shapeType,scroll:!0,gridStep:this.config.gridStep,margin:{y:70,x:this.config.reserveWidth}}),this._sidebar=new p.Sidebar(this._diagram),this._resizer=new d.Resizer(this.events,this._diagram),this._diagram.config.$svg=function(t){var n=e._diagram.selection.getId(),i=e._diagram.data.getItem(n);return[e._resizer.toSVG(i,t)]},this.history=new f.UndoManager(this._diagram.data),this._diagram.events.on("Load",function(){e.history.reset(),e._diagram.selection.add(e._diagram.data.getId(0))}),this._diagram.data.parse([{id:1}]),n.cell("top").attach(h.topbar,this),n.cell("right").attach(this._sidebar.getUI()),n.cell("center").attach(this._diagram)},e.prototype._setHandlers=function(){var t=this;this._diagram.events.on("ShapeIconClick",function(e){var n=t._diagram.selection.getId();switch(e){case"add":var i={id:o.uid(),parent:n};t._diagram.data.add(i),t._diagram.showItem(i.id);break;case"remove":t._diagram.data.remove(n);break;case"vertical":case"horizontal":t._diagram.data.update(n,{dir:e})}}),this._diagram.events.on("Change",function(){return t._layout.paint()})},e}(a.View);e.DiagramEditor=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(40))},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(41),s=n(0),a=null,u=function(t){function e(n,i){var r=t.call(this,n,i)||this;if(r._all={},r._parseConfig(),r._css+=r._xLayout?"layout_x":"layout_y",!(n instanceof e)){var o=s.create({render:function(){return r.toVDOM()}},r);r.mount(n,o)}return r}return r(e,t),e.prototype.cell=function(t){return this._all[t]},e.prototype.toVDOM=function(){var e=this._cells.map(function(t){return t.toVDOM()});return t.prototype.toVDOM.call(this,e)},e.prototype._createUi=function(t){return t.rows||t.cols?new e(this,t):new o.Cell(this,t)},e.prototype._parseConfig=function(){var t=this,e=this.config;a||(a=this);var n=e.rows||e.cols||e.views;this._xLayout=!e.rows,this._cells=n.map(function(e){var n=t._createUi(e);return e.id&&(a._all[e.id]=n),n}),a===this&&(a=null)},e}(o.Cell);e.Layout=u},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=n(5),a=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.mount(e,{redraw:function(){e.paint()}}),i._css="",i}return r(e,t),e.prototype.isVisible=function(){return!this.config.hidden},e.prototype.destructor=function(){this.config=null},e.prototype.getWidget=function(){return this._ui},e.prototype.attach=function(t,e){return"object"==typeof t?this._ui=t:"string"==typeof t?this._ui=new window.dhx[t](null,e):"function"==typeof t&&(t.prototype instanceof s.View?this._ui=new t(null,e):this._ui={getRootView:function(){return t(e)}}),this.paint(),this._ui},e.prototype.toVDOM=function(t){var e,n=this.config,i=this._css+" "+(this.config.css||""),r={};if(n.width&&(r.flex="0 0 "+n.width),n.height&&(r.height=n.height),this.config.html)e=[o.el("div",{".innerHTML":this.config.html})];else if(this._ui){var s=this._ui.getRootView();s.render&&(s=o.inject(s)),e=[s]}else e=t||null;return o.el("div",{_key:this._uid,style:r,class:"dhx_cell "+i},e)},e}(s.View);e.Cell=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(43);e.buttons=[{content:i.addIcon,id:"add"},{content:i.horizontalIcon,id:"horizontal",check:function(t){return t.$kids&&t.$kids.length},css:function(t){return"vertical"!==t.dir?"dhx_active":""}},{content:i.verticalIcon,id:"vertical",check:function(t){return t.$kids&&t.$kids.length},css:function(t){return"vertical"===t.dir?"dhx_active":""}},{content:i.removeIcon,id:"remove",check:function(t){return!!t.$parent},css:function(){return"dhx_icon_remove"}}]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.addIcon=function(){return i.sv("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[i.sv("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"})])},e.removeIcon=function(){return i.sv("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[i.sv("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"})])},e.verticalIcon=function(){return i.sv("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"18",viewBox:"0 0 10 18"},[i.sv("path",{d:"M2.5,5 C1.11928813,5 0,3.88071187 0,2.5 C0,1.11928813 1.11928813,0 2.5,0 C3.88071187,0 5,1.11928813 5,2.5 C5,3.88071187 3.88071187,5 2.5,5 Z M10,11 L5,11 L5,9 L3,9 L3,11 L3,15 L5,15 L5,13 L10,13 L10,18 L5,18 L5,16 L2,16 L2,15 L2,11 L2,9 L2,8 L2,5 L2.5,5 L3,5 L3,8 L5,8 L5,6 L10,6 L10,11 Z"})])},e.horizontalIcon=function(){return i.sv("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"15",viewBox:"0 0 20 15",transform:"translate(.5,.5)"},[i.sv("path",{d:"M10,4.94999094 L10,7 L17,7 L17,7.5 L17,10 L16,10 L16,8 L10,8 L10,10 L9,10 L9,8 L3,8 L3,10 L2,10 L2,7 L2.5,7 L9,7 L9,4.94999094 C7.85887984,4.71835578 7,3.70947896 7,2.5 C7,1.11928813 8.11928813,0 9.5,0 C10.8807119,0 12,1.11928813 12,2.5 C12,3.70947896 11.1411202,4.71835578 10,4.94999094 Z M-2.90878432e-13,10 L5,10 L5,15 L-2.90878432e-13,15 L-2.90878432e-13,10 Z M14,10 L19,10 L19,15 L14,15 L14,10 Z M7,10 L12,10 L12,15 L7,15 L7,10 Z"})])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(10);function o(t,e){e.data.editor.history.undo(!0),e.data.editor.events.fire("ResetButton")}function s(t,e){e.data.editor.events.fire("ApplyButton")}function a(t,e){e.data.editor.history.undo()}function u(t,e){e.data.editor.history.redo()}e.topbar=function(t){var e=t.history,n=i.el("button",{class:"dhx_btn dhx_btn--flat",dhx_id:"resetAll",_data:{editor:t},onclick:[o]},r.default.resetChanges),l=i.el("button",{class:"dhx_btn dhx_btn--active",dhx_id:"applyAll",_data:{editor:t},onclick:[s]},r.default.applyAll),c=i.el(".dhx_state_block",[i.el("div",{dhx_id:"undo",_data:{editor:t},onclick:[a],class:"undo "+(e.isUndo()?"undo--active":"")}),i.el("div",{dhx_id:"redo",_data:{editor:t},onclick:[u],class:"redo "+(e.isRedo()?"redo--active":"")})]);return!1!==t.config.showApply?[n,l,c]:[n,c]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(46),r=n(0);function o(t,e){i.drag.start(t,e.data.resizer,e.data.p)}var s=function(){function t(t,e){var n=this;this._events=t,this._diagram=e,this._diagram.events.on("ShapeMouseDown",function(t,e){var r=n._diagram.config.gridStep;n._diagram.selection.add(t),i.drag.start(e,{onMove:function(e,i,o){var s=n._diagram.data.getItem(t);i.x=Math.round(i.x/r)*r,i.y=Math.round(i.y/r)*r;var a={dx:(s.dx||0)+i.x,dy:(s.dy||0)+i.y};n._diagram.data.update(s.id,a)},onUp:function(){n._events.fire("ShapeMove",[])}},null)})}return t.prototype.toSVG=function(t,e){var n=this,i=this._getRectPoints(t,10);return r.el(".dhx_resizer",{onmousedown:{".dhx_resize_grip":o}},i.map(function(t){return r.el(".dhx_resize_grip",{style:"cursor: "+t.cursor+"; position: absolute; top: "+(t.y-e.top)+"px; left: "+(t.x-e.left)+"px",_data:{resizer:n,p:t}})}))},t.prototype.onMove=function(t,e,n){var i=this._diagram.config.gridStep,r=this._diagram.selection.getItem();e.x=Math.round(e.x/i)*i,e.y=Math.round(e.y/i)*i;var o={};o.width=r.width-e.x*n.dx*2,o.width>=30||(o.width=r.width),o.height=r.height-e.y*n.dy,o.height>=30?o.dy=(r.dy||0)+e.y*(1===n.dy?1:0):o.height=r.height,this._diagram.data.update(r.id,o)},t.prototype.onUp=function(){this._events.fire("ShapeResize",[])},t.prototype._getRectPoints=function(t,e){var n=t.$shape.getBox(),i=t.width,r=t.height,o=n.left-e/2,s=n.top-e/2;return[{cursor:"nw-resize",x:o,y:s,dx:1,dy:1},{cursor:"n-resize",x:o+i/2,y:s,dx:0,dy:1},{cursor:"ne-resize",x:o+i,y:s,dx:-1,dy:1},{cursor:"e-resize",x:o+i,y:s+r/2,dx:-1,dy:0},{cursor:"se-resize",x:o+i,y:s+r,dx:-1,dy:-1},{cursor:"s-resize",x:o+i/2,y:s+r,dx:0,dy:-1},{cursor:"sw-resize",x:o,y:s+r,dx:1,dy:-1},{cursor:"w-resize",x:o,y:s+r/2,dx:1,dy:0}]},t}();e.Resizer=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){var t=this;this._moveHandler=function(e){if(Math.abs(e.clientX-t._start.x)>5||Math.abs(e.clientY-t._start.y)>5){var n={x:e.clientX-t._start.x,y:e.clientY-t._start.y};t._handler.onMove(e,n,t._context),t._start.x+=n.x,t._start.y+=n.y}},this._upHandler=function(e){document.removeEventListener("mousemove",t._moveHandler),document.removeEventListener("mouseup",t._upHandler),document.body.classList.remove("dhx_noselect"),t._handler.onUp(e),t._handler=t._start=null}}return t.prototype.start=function(t,e,n){this._handler=e,this._context=n,this._start={x:t.clientX,y:t.clientY},document.addEventListener("mousemove",this._moveHandler),document.addEventListener("mouseup",this._upHandler),document.body.classList.add("dhx_noselect")},t}();e.drag=new i},function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r=n(48),o=n(61),s=n(10),a=function(){function t(t){var e=this;this._diagram=t,this._ui=new r.Property(null,{title:s.default.editCard}),this._ui.parseStruct(o.baseSidebar),this._ui.attachEvent("onChange",function(){return e.getValues()}),this._diagram.events.on("Change",function(){return e.setValues()}),this._diagram.events.on("AfterSelect",function(){var t=e._diagram.selection.getItem();if(e._itemType!==t.type){var n=t.$shape.getMetaInfo().map(function(t){return t.type="text"===t.type?"textarea":t.type,t}).concat(o.baseSidebar);e._ui.parseStruct(n),e._itemType=t.type}e.setValues()})}return t.prototype.setValues=function(){var t=this._diagram.selection.getItem();if(t){var e=i({},t,{position:{dx:t.dx||0,dy:t.dy||0},size:{width:t.width,height:t.height},color:t.color||""});this._ui.setValues(e)}},t.prototype.getValues=function(){var t=i({},this._ui.getValues());t.dx=1*t.position.dx,t.dy=1*t.position.dy,t.width=1*t.size.width,t.height=1*t.size.height,delete t.size,delete t.position;var e=this._diagram.selection.getId();this._diagram.data.update(e,t)},t.prototype.getUI=function(){return this._ui},t}();e.Sidebar=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(49))},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(50),s=n(0),a=n(1),u=function(t){function e(e,n){var i=t.call(this,e,n)||this;i._lines=[],a.EventsMixin(i);var r=s.create({render:function(t,e){return e._toVDOM()}},i);return i.attachEvent("onChange",i.paint),i.attachEvent("onAfterFileUpload",i.paint),i.mount(e,r),i}return r(e,t),e.prototype._toVDOM=function(){var t=this._lines.map(function(t){return t.toVDOM()});return s.el(".dhx_property",[s.el(".sidebar-title",this.config.title)].concat(t))},e.prototype.parseStruct=function(t){this._elements={},this._lines=[];for(var e=0;e<t.length;e++){var n=t[e],i=new o.items[n.type](n,this);this._lines.push(i),this._elements[n.id]=i}this.paint()},e.prototype.parse=function(t){this.setValues(t)},e.prototype.clear=function(){for(var t in this._elements)this._elements[t].clear()},e.prototype.getValues=function(){var t={};for(var e in this._elements)t[e]=this._elements[e].getValue();return t},e.prototype.setValues=function(t){for(var e in this._elements){var n=this._elements[e],i=t[e];i?(n.clear(i),n.setValue(i,!0)):n.clear(i)}this.paint()},e}(n(5).View);e.Property=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(51),r=n(57),o=n(58),s=n(3),a=n(59),u=n(60);e.items={text:s.Text,textarea:a.Textarea,group:r.Group,inputs:o.Inputs,color:i.ColorPicker,image:u.Uploader}},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(52),s=n(0),a=function(t){function e(e,n){var i=this;return e.validation=e.validation||"color",(i=t.call(this,e,n)||this)._colorPicker=new o.Colorpicker,i._colorPicker.attachEvent("onColorChange",function(t){i.setValue(t)}),i._handlers.show=function(t){return i._showPopup(t.target)},i}return r(e,t),e.prototype.toVDOM=function(){return s.el(".edit-section.color-edit",{_key:this._uid},[s.el(".section-title",this._config.label||""),s.el(".color-edit",[s.el(".color-picker",{onclick:this._handlers.show,style:{backgroundColor:this._config.value}}),s.el(".pop-up",this._config.hint||"")])])},e.prototype._showPopup=function(t){this._colorPicker.setValue(this._config.value),this._colorPicker.show(t)},e}(n(3).Text);e.ColorPicker=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(53))},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(54),s=n(56),a=n(0),u=function(t){function e(e){var n=t.call(this,e)||this;return e=e||{},n.config.width=e.width||228,n.config.height=e.height||170,n.config.css+=" dhx_colorpicker_popup",n._handlers={click:{".dhx_palette_cell":n._onColorClick.bind(n)}},n}return r(e,t),e.prototype.setValue=function(t){this._selected=t||null},e.prototype._getCells=function(t){var e=this;return t.reduce(function(t,n){var i=e._selected===n?"dhx_selected":"";return t.push(a.el(".dhx_palette_cell",{class:i,_data:{color:n},style:"background:"+n})),t},[])},e.prototype._onColorClick=function(t,e){this._selected=e.data.color,this.callEvent("onColorChange",[this._selected]),this.hide()},e.prototype._getGrayShades=function(){return a.el(".dhx_palette_row",this._getCells(s.grayShades))},e.prototype._getPalette=function(){var t=this;return s.palette.reduce(function(e,n){return e.push(a.el(".dhx_palette_col",t._getCells(n.colors))),e},[])},e.prototype._getContent=function(){return a.el(".dhx_colorpicker_wrap",[a.el(".dhx_palette",{onclick:this._handlers.click},[this._getGrayShades()].concat(this._getPalette()))])},e}(o.Popup);e.Colorpicker=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(55))},function(t,e,n){"use strict";var i=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),o=n(1),s=n(0),a=function(){function t(t){var e=this;this._handleOutsideClick=function(t){e._popup.node.el.contains(t.target)||e._node.contains(t.target)||e.hide()};this.config=i({},{width:400,height:400,css:""},t),this._eventSystem=new o.EventSystem(this),this.state={}}return t.prototype.attachEvent=function(t,e){this._eventSystem.on(t,e,this)},t.prototype.detachEvent=function(t){this._eventSystem.detach(t,this)},t.prototype.callEvent=function(t,e){return this._eventSystem.fire(t,e)},t.prototype.show=function(t){if(this._hideTimer)return clearTimeout(this._hideTimer),void this._popup.classList.remove("hide");this._popup||(this._getPosition(t),this._node=t,this._popup=s.create({render:this.render},this),this._popup.mount(document.body),document.body.addEventListener("click",this._handleOutsideClick))},t.prototype.hide=function(){this._popup.unmount(),this._popup=null,document.body.removeEventListener("click",this._handleOutsideClick)},t.prototype.render=function(t,e){return s.el(".dhx_popup",{style:"\n\t\t\twidth:"+e.config.width+"px;\n\t\t\theight:"+e.config.height+"px;\n\t\t\ttop:"+e.state.position.top+"px;\n\t\t\tleft:"+e.state.position.left+"px;",class:e.config.css,onclick:function(t){e.callEvent("onDomEvent",["click",t])}},[s.el(".dhx_popup_content.dhx_card",{style:"width:100%;height:100%;"},[e._getContent()])])},t.prototype._getContent=function(){return null},t.prototype._getPosition=function(t){var e=(t=r.toNode(t)).getBoundingClientRect(),n=document.body.getBoundingClientRect(),i=e.left+e.width/2,o=e.bottom,s=i-this.config.width/2,a=e.bottom+this.config.height,u={top:o,left:s},l=e.top-this.config.height,c=n.bottom-a,h=s,d=n.right-e.right;return d<0&&(u.left=e.right-this.config.width),h<0&&(u.left=e.left),c<0&&l>0?(u={top:o-this.config.height,left:s},(d<0||h<0)&&(u.left=d<0?e.right-this.config.width:e.left)):c<0&&(u.top=e.bottom+n.bottom-a,u.left=e.right,h<0&&(u.left=e.right)),this.state.position=u,u},t}();e.Popup=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.grayShades=["#000000","#434343","#666666","#999999","#B7B7B7","#CCCCCC","#D9D9D9","#EFEFEF","#F3F3F3","#FFFFFF"],e.palette=[{name:"pink",colors:["#E91E63","#FCE4EC","#F8BBD0","#F06292","#C2185B","#880E4F"]},{name:"red",colors:["#F44336","#FFEBEE","#FFCDD2","#E57373","#D32F2F","#B71C1C"]},{name:"orange",colors:["#FF9800","#FFF3E0","#FFE0B2","#FFB74D","#F57C00","#EF6C00"]},{name:"yellow",colors:["#FFEB3B","#FFFDE7","#FFF9C4","#FFF176","#FBC02D","#F57F17"]},{name:"green",colors:["#4CAF50","#E8F5E9","#C8E6C9","#81C784","#388E3C","#1B5E20"]},{name:"blue green",colors:["#00C7B5","#C8FAF6","#8DE9E1","#03D7C4","#079D8F","#076F66"]},{name:"blue",colors:["#03A9F4","#E1F5FE","#B3E5FC","#4FC3F7","#0288D1","#01579B"]},{name:"indigo",colors:["#3F51B5","#E8EAF6","#C5CAE9","#7986CB","#303F9F","#1A237E"]},{name:"deep purple",colors:["#673AB7","#EDE7F6","#D1C4E9","#9575CD","#512DA8","#311B92"]},{name:"blue gray",colors:["#607D8B","#ECEFF1","#CFD8DC","#90A4AE","#455A64","#263238"]}]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=function(){function t(t,e){this._config=t}return t.prototype.toVDOM=function(){return i.el(".dhx_group_item.side-bar",this._config.label||"")},t}();e.Group=r},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),a=n(16),u=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._map={},e.options=e.options.map(function(t){return i._map[t.id]=t,o({},t)}),i}return r(e,t),e.prototype.setValue=function(t,e){for(var n in t){var i=this._map[n];this._setValue(i,t[n],!0)}e||this._evs.callEvent("onChange")},e.prototype.getValue=function(){for(var t={},e=this._config.options,n=0;n<e.length;n++){var i=e[n];t[i.id]=i.value}return t},e.prototype.clear=function(){for(var t=this._config.options,e={},n=0;n<t.length;n++)e[t[n].id]="";this.setValue(e,!0)},e.prototype.toVDOM=function(){for(var t=this._config.options,e=t.length,n=[],i=[],r=0;r<e;r++){var o=t[r];i.push(s.el("input",{type:"text",name:o.id,value:o.value,index:r,class:o.invalid?"dhx_invalid":"",_ref:this._uid+r,onchange:this._handlers.change,oninput:this._handlers.change})),n.push(s.el("span",o.label))}return s.el(".edit-section",[s.el(".inputs_group",[s.el("span",this._config.label)].concat(i)),s.el(".inputs_group_desc",n)])},e.prototype._changed=function(t){var e=t.target.value,n=t.target.getAttribute("index"),i=this._config.options[n];e!==i.value&&this._setValue(i,e)},e.prototype._setValue=function(t,e,n){var i=t.value;t.value=e,t.invalid=!a.validate(t.value,t.validate),n||this._evs.callEvent("onChange",[t.id,e,i])},e}(n(3).Text);e.Inputs=u},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.toVDOM=function(){var t=this._config,e=t.placeholder||"";return o.el(".edit-section.text-edit",{_key:this._uid},[o.el(".section-title",t.label),o.el("textarea.dhx_textarea",{placeholder:e,value:t.value,class:this._config.isValid?"":"dhx_invalid",_ref:this._uid,onchange:this._handlers.change,oninput:this._handlers.change})])},e}(n(3).Text);e.Textarea=s},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),s=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._handlers.upload=function(t){return i._onUpload(t)},i}return r(e,t),e.prototype.toVDOM=function(){return o.el(".edit-section.color-edit",[o.el(".section-title",this._config.label),o.el(".dhx_img_uploader",[o.el("label",[o.el("input.dhx_uploader_input",{type:"file",name:"file",id:"dhx_img_upload",accept:".jpg, .jpeg, .png",style:"display:none",onchange:this._handlers.upload}),o.el(".dhx_uploader_preview",{id:"dhx_img_preview",class:this._loading?"loading":"",style:'background-image:url("'+this._config.value+'")',_ref:this._uid},[o.el(".dhx_loading")]),o.el(".pop-up",this._config.hint||"Click to upload")])])])},e.prototype._getBase64=function(t){return new Promise(function(e,n){t||n();var i=new FileReader;i.onloadend=function(){e(i.result)},i.readAsDataURL(t)})},e.prototype._onUpload=function(t){var e=this,n=t.target.files[0];this._loading=!0,this._evs.callEvent("onBeforeFileUpload"),this._getBase64(n).then(function(t){e.setValue(t),e._evs.callEvent("onAfterFileUpload")}).catch(function(t){return!0}).then(function(t){return e._loading=!1})},e}(n(3).Text);e.Uploader=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baseSidebar=[{id:"color",type:"color",label:"Color",hint:"Top line",value:"#FFDDFF"},{id:"position",type:"inputs",label:"Position",validate:"number",options:[{id:"dx",value:"1000",label:"Left",validate:"number"},{id:"dy",value:"999",label:"Top",validate:"number"}]},{id:"size",type:"inputs",label:"Size",options:[{id:"width",value:"300",label:"Width",validate:"number"},{id:"height",value:"200",label:"Height",validate:"number"}]}]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){var e=this;this._data=t,this.reset(),this._data.events.on("Change",function(){e._inProgress||e.push(e._data.serialize())})}return t.prototype.push=function(t){this._position!==this._state.length-1&&(this._state=this._state.slice(0,this._position+1));var e=this._state.length-1,n=new Date,i={time:n,state:t};n.valueOf()-this._state[e].time.valueOf()>500?(this._state.push(i),this._position++):this._state[e]=i},t.prototype.reset=function(){this._inProgress||(this._state=[{time:new Date,state:this._data.serialize()}],this._position=0)},t.prototype.undo=function(t){this.isUndo()&&(t?(this._position=0,this._state=this._state.slice(0,1)):this._position--,this._apply(this._state[this._position]))},t.prototype.redo=function(){this.isRedo()&&(this._position++,this._apply(this._state[this._position]))},t.prototype.isUndo=function(){return this._position>0},t.prototype.isRedo=function(){return this._position+1<=this._state.length-1},t.prototype._apply=function(t){this._inProgress=!0,this._data.parse(t.state),this._inProgress=!1},t}();e.UndoManager=i}]);